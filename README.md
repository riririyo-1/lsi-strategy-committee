# LSI 戦略コミッティ プロジェクト

## プロジェクト概要

LSI 技術動向、分析、TOPICS 配信を行う公式 Web サイトプロジェクトです。

## アーキテクチャ方針

このプロジェクトは **Clean Architecture** パターンに基づいて構築されています。各層は明確な責務を持ち、依存関係は内側（ドメイン層）に向かって流れるように設計されています。これにより、ビジネスロジックの独立性、テスト容易性、保守性の向上を目指します。

## フォルダ構成とアーキテクチャマッピング

プロジェクトの主要なフォルダ構成と、それらがクリーンアーキテクチャの各層及びその他の役割とどのように対応しているかを以下に示します。

```
src/
├── app/ # Next.js のルーティング定義 (UI 層 / フレームワーク層)
├── components/ # プロジェクト全体で再利用可能な汎用 UI コンポーネント (UI 層 / フレームワーク層)
├── features/ # 機能ごとのドメインモジュール群
│ ├── [feature_name]/ # 特定の機能 (例: contact, topics)
│ │ ├── components/ # その機能固有の UI コンポーネント (UI 層 / フレームワーク層)
│ │ │ └── ContactForm.tsx
│ │ ├── hooks/ # React Hooks (UI 層とユースケース層の連携など)
│ │ │ └── useContactForm.ts
│ │ ├── use-cases/ # アプリケーション固有のビジネスロジック (ユースケース層)
│ │ │ └── SubmitContactUseCase.ts
│ │ ├── ports/ # 依存性逆転のためのインターフェース定義 (インターフェースアダプター層)
│ │ │ └── IContactRepository.ts
│ │ ├── infrastructure/# インターフェースの具象実装 (インターフェースアダプター層 / フレームワーク層)
│ │ │ └── ApiContactRepository.ts
│ │ └── validations/ # 入力値のバリデーションロジック (ユースケース層 or アダプター層)
│ │ └── contactFormSchema.ts
├── libs/ # 外部ライブラリのラッパーや設定 (インフラストラクチャ層に近い)
├── pipeline/ # データ処理パイプライン (Python スクリプトなど) (インフラストラクチャ層)
├── services/ # 外部サービス (API, DB 等) との直接的な連携 (インフラストラクチャ層)
├── store/ # グローバルな状態管理 (Zustand, Redux など) (UI 層やアダプター層と密接)
├── styles/ # グローバルなスタイル定義、テーマ (UI 層 / フレームワーク層)
├── types/ # プロジェクト全体で利用する型定義、特にドメインエンティティの型 (エンティティ層の中心)
└── utils/ # 特定の機能に依存しない汎用ユーティリティ関数
```

## クリーンアーキテクチャの各層の責務

上記フォルダ構成は、以下のクリーンアーキテクチャの層の原則に基づいています。

### 1. エンティティ層 (Enterprise Business Rules)

- **責務**: プロジェクト固有のビジネスルールとデータ構造を定義します。アプリケーションの最も中核となる部分です。
- **対応フォルダ例**: `/src/types/` (ドメインの核となるデータ型や、ビジネスルールを持つエンティティの型定義)

### 2. ユースケース層 (Application Business Rules)

- **責務**: アプリケーション固有のビジネスロジックを実装します。エンティティを操作し、特定の目的を達成するための処理フローを定義します。
- **対応フォルダ例**: `/src/features/*/use-cases/`

### 3. インターフェースアダプター層 (Interface Adapters)

- **責務**: ユースケース層やエンティティ層と、フレームワークや外部ツールとの間でデータ形式を変換したり、やり取りを仲介したりします。リポジトリのインターフェース定義や、プレゼンター、コントローラーなどが該当します。
- **対応フォルダ例**:
  - `/src/features/*/ports/` (ユースケース層が依存するインターフェース定義)
  - `/src/features/*/infrastructure/` (上記インターフェースの具象実装の一部)
  - `/src/features/*/hooks/` (UI とユースケースを繋ぐカスタムフックなど)

### 4. フレームワーク & ドライバー層 (Frameworks & Drivers)

- **責務**: UI、データベース、外部 API、Web フレームワークなど、具体的な技術詳細を実装します。最も外側の層であり、変更が発生しやすい部分です。
- **対応フォルダ例**:
  - `/src/app/`, `/src/components/`, `/src/features/*/components/` (UI 関連)
  - `/src/services/` (外部 API 連携)
  - `/src/libs/` (外部ライブラリ連携)
  - `/src/pipeline/` (外部データ処理)

## 設計原則

1.  **依存性の方向**: 依存関係は常に外側の層から内側の層（エンティティ層）へ向かう。内側の層は外側の層について関知しない（**依存関係逆転の原則**）。
2.  **責務の分離**: 各クラスやモジュールは単一の責任を持つ（**単一責任の原則**）。
3.  **明確な境界**: 層間のやり取りは、明確に定義されたインターフェースを通じて行う。
4.  **テスト容易性**: ビジネスロジック（特にユースケース層やエンティティ層）は、外部フレームワークや UI から独立してテストできるように設計する。
5.  **型安全性**: `any` 型の利用を避け、可能な限り明示的な型定義を用いることで、コードの堅牢性を高める。
